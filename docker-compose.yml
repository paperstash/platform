# TODO(mtwilliams): Use extends for different environments.
# TODO(mtwilliams): Mount volumes for `app` better, so permissions don't get all fucked up.
# TODO(mtwilliams): Mount volumes for database.

app:
  build: .
  ports:
    - "4000:4000"
  links:
    - db
  environment:
    - DOCKER=1
    - MIX_ENV=dev
    - DATABASE_URL=postgres://paperstash:gJ4c5x0rPJUzQUSHtszweLpW2PeER0Kv@db:5432/e8uuvoq6wybl3tes
    - ELASTIC_SEARCH_URL=?
    - REDIS_URL=?
  volumes:
    - ./:/app

db:
  image: paperstash/db:9.4.1
  environment:
    - DB_NAME=e8uuvoq6wybl3tes
    - DB_USER=paperstash
    - DB_PASSWORD=gJ4c5x0rPJUzQUSHtszweLpW2PeER0Kv
    - POSTGRES_USER=postgres
    - POSTGRES_PASSWORD=postgres
  ports:
    - 5432
